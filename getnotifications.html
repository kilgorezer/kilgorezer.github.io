<body><button onclick="main(true)" id="r">Request</button>
<script>
  var send = function(icon, title, text) {
    return new Notification(title, { body: text, icon: icon });
  };
  async function requestNotificationPermission() {
    await Notification.requestPermission()
    location.href=location.href
  }
  function main(a) {
  var granted = Notification.permission=="granted"?1:(Notification.permission=="default"?(function() {requestNotificationPermission(); return NaN})():0);
  if (granted&&a) {
    document.body.innerHTML += "Granted!";
  }
  else if (isNaN(granted)&&a) {
    document.body.innerHTML += "Asked Permission.";
  }
  else if (a) {
    document.body.innerHTML += "Denied!";
  }
  if (a) {
    document.getElementById("r").remove();
  }return granted}
</script>
<noscript>
  Unknowable!
</noscript></body>
